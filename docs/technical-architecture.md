# ERPset æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## 1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### 1.1 è¨­è¨ˆåŸå‰‡

ERPsetãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯ä»¥ä¸‹ã®è¨­è¨ˆåŸå‰‡ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚Œã¾ã™ï¼š

#### ã‚³ã‚¢åŸå‰‡
- **æ®µéšçš„è©³ç´°åŒ–**: Phaseæ¯ã«æŠ€è¡“é¸æŠã‚’æœ€é©åŒ–ã€éåº¦ãªå…ˆè¡Œè¨­è¨ˆã‚’å›é¿
- **ç–çµåˆãƒ»é«˜å‡é›†**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®APIé€£æºã«ã‚ˆã‚Šæ‹¡å¼µæ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’ç¢ºä¿
- **çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ä¸­å¿ƒ**: æ§‹é€ åŒ–ã•ã‚ŒãŸçŸ¥è­˜ãƒ‡ãƒ¼ã‚¿ãŒç«¶äº‰å„ªä½ã®æ ¸å¿ƒ
- **å®Ÿè£…ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ç†è«–ã‚ˆã‚Šå®Ÿè£…ã€å®Ÿè£…ã‹ã‚‰å­¦ã‚“ã çŸ¥è¦‹ã§è¨­è¨ˆã‚’æ”¹å–„

#### éæ©Ÿèƒ½è¦ä»¶
- **å¯ç”¨æ€§**: 99.9%ï¼ˆæœˆé–“ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ 43åˆ†ä»¥å†…ï¼‰
- **æ€§èƒ½**: å¿œç­”æ™‚é–“2ç§’ä»¥å†…ï¼ˆãƒ’ã‚¢ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆï¼‰
- **æ‹¡å¼µæ€§**: æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å¯¾å¿œã€ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆæ¶æ§‹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: SOC2 Type2æº–æ‹ ã€GDPRå¯¾å¿œ

### 1.2 å…¨ä½“ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ERPset Platform                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      API Gateway Layer                         â”‚
â”‚  Authentication | Rate Limiting | Routing | Monitoring         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Frontend Layer â”‚              Backend Services                â”‚
â”‚                 â”‚                                              â”‚
â”‚  Next.js Web    â”‚  Requirements    â”‚    Migration             â”‚
â”‚  Application    â”‚  Definition      â”‚    Support               â”‚
â”‚                 â”‚  Service         â”‚    Service               â”‚
â”‚                 â”‚                  â”‚                          â”‚
â”‚  React Admin    â”‚  Knowledge       â”‚    Integration           â”‚
â”‚  Dashboard      â”‚  Base            â”‚    Adapter               â”‚
â”‚                 â”‚  Service         â”‚    Service               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Data Layer                                â”‚
â”‚  PostgreSQL  â”‚  Redis Cache  â”‚  File Storage  â”‚  Vector DB    â”‚
â”‚  (Core Data) â”‚  (Sessions)   â”‚  (Documents)   â”‚  (Knowledge)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. Phase 1 MVP ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸å®šç†ç”±

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Next.js 15 + TypeScript
**é¸å®šç†ç”±**:
- **é–‹ç™ºé€Ÿåº¦**: React Serverã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã‚‹é«˜é€Ÿé–‹ç™º
- **SEOå¯¾å¿œ**: SSRã«ã‚ˆã‚‹æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³æœ€é©åŒ–
- **TypeScript**: å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹å“è³ªå‘ä¸Š
- **ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **: è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ„ãƒ¼ãƒ«ç¾¤

**ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
```json
{
  "dependencies": {
    "next": "^15.0.0",
    "react": "^18.3.0",
    "typescript": "^5.4.0",
    "tailwindcss": "^3.4.0",
    "zustand": "^4.5.0",
    "@tanstack/react-query": "^5.0.0",
    "react-hook-form": "^7.51.0",
    "zod": "^3.22.0"
  }
}
```

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Python + FastAPI
**é¸å®šç†ç”±**:
- **AI/MLçµ±åˆ**: è±Šå¯ŒãªAI/MLãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®è¦ªå’Œæ€§
- **é–‹ç™ºç”Ÿç”£æ€§**: Pythonã®å¯èª­æ€§ã¨é–‹ç™ºé€Ÿåº¦
- **APIæ€§èƒ½**: FastAPIã®é«˜æ€§èƒ½ãƒ»è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
- **å‹å®‰å…¨**: Pydanticã«ã‚ˆã‚‹å‹æ¤œè¨¼

**ä¸»è¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
```python
dependencies = [
    "fastapi[all]==0.104.1",
    "sqlalchemy==2.0.25",
    "alembic==1.13.1",
    "pydantic==2.5.0",
    "pandas==2.1.4",
    "langchain==0.1.0",
    "openai==1.7.0",
    "redis==5.0.1",
    "pytest==7.4.3"
]
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: PostgreSQL + Redis
**PostgreSQL**: 
- ACIDç‰¹æ€§ã«ã‚ˆã‚‹é«˜ã„æ•´åˆæ€§
- JSONå‹ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒæŸ”è»Ÿæ€§
- é«˜æ€§èƒ½å…¨æ–‡æ¤œç´¢ï¼ˆpg_trgmï¼‰

**Redis**:
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼ˆPub/Subï¼‰
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…

### 2.2 è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆ
```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/            # èªè¨¼ãƒ«ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ dashboard/         # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ projects/          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
â”‚   â””â”€â”€ api/               # API Routes
â”œâ”€â”€ components/            # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/               # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ forms/            # ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ charts/           # ãƒãƒ£ãƒ¼ãƒˆãƒ»ã‚°ãƒ©ãƒ•
â”œâ”€â”€ lib/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ api/              # API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ store/            # Zustand ã‚¹ãƒˆã‚¢
â”‚   â””â”€â”€ utils/            # å…±é€šé–¢æ•°
â””â”€â”€ types/                # TypeScriptå‹å®šç¾©
```

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹æˆ
```
app/
â”œâ”€â”€ api/                  # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ v1/              # APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ projects/    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£API
â”‚   â”‚   â”œâ”€â”€ requirements/ # è¦ä»¶å®šç¾©API
â”‚   â”‚   â””â”€â”€ knowledge/   # çŸ¥è­˜ãƒ™ãƒ¼ã‚¹API
â”œâ”€â”€ core/                # ã‚³ã‚¢æ©Ÿèƒ½
â”‚   â”œâ”€â”€ config/          # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ database/        # DBæ¥ç¶šãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ security/        # èªè¨¼ãƒ»èªå¯
â”‚   â””â”€â”€ logging/         # ãƒ­ã‚°ç®¡ç†
â”œâ”€â”€ models/              # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ database/        # SQLAlchemyãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ schemas/         # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ requirements/    # è¦ä»¶å®šç¾©ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ knowledge/       # çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ generators/      # è‡ªå‹•ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
â””â”€â”€ tests/               # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### 3.1 ã‚³ã‚¢ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
```sql
-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    erp_type VARCHAR(50) NOT NULL, -- 'Salesforce', 'SAP', 'Oracle', etc.
    business_domain VARCHAR(50) NOT NULL, -- 'Sales', 'Service', 'Marketing', etc.
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼
CREATE TABLE project_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    user_id UUID NOT NULL,
    role VARCHAR(50) NOT NULL, -- 'admin', 'consultant', 'viewer'
    joined_at TIMESTAMP DEFAULT NOW()
);
```

#### çŸ¥è­˜ãƒ™ãƒ¼ã‚¹
```sql
-- ERPæ©Ÿèƒ½ãƒã‚¹ã‚¿
CREATE TABLE erp_functions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    erp_type VARCHAR(50) NOT NULL,
    module VARCHAR(50) NOT NULL,
    function_code VARCHAR(100) NOT NULL,
    function_name VARCHAR(255) NOT NULL,
    description TEXT,
    configuration_params JSONB,
    dependencies JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ãƒ’ã‚¢ãƒªãƒ³ã‚°é …ç›®ãƒã‚¹ã‚¿
CREATE TABLE hearing_items (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    erp_function_id UUID REFERENCES erp_functions(id),
    item_code VARCHAR(100) NOT NULL,
    question TEXT NOT NULL,
    answer_type VARCHAR(20) NOT NULL, -- 'text', 'select', 'checkbox'
    answer_options JSONB,
    is_required BOOLEAN DEFAULT false,
    display_order INTEGER DEFAULT 0
);
```

#### è¦ä»¶å®šç¾©ãƒ‡ãƒ¼ã‚¿
```sql
-- ãƒ’ã‚¢ãƒªãƒ³ã‚°çµæœ
CREATE TABLE hearing_responses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    hearing_item_id UUID REFERENCES hearing_items(id),
    response_value JSONB NOT NULL,
    respondent_role VARCHAR(50),
    responded_at TIMESTAMP DEFAULT NOW()
);

-- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®šç¾©
CREATE TABLE setup_definitions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    erp_function_id UUID REFERENCES erp_functions(id),
    parameter_name VARCHAR(255) NOT NULL,
    parameter_value JSONB NOT NULL,
    derivation_rule TEXT,
    status VARCHAR(20) DEFAULT 'draft',
    created_at TIMESTAMP DEFAULT NOW()
);

-- GAPè¦ä»¶
CREATE TABLE gap_requirements (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    gap_type VARCHAR(50) NOT NULL, -- 'functional', 'technical', 'integration'
    gap_description TEXT NOT NULL,
    business_impact VARCHAR(20), -- 'high', 'medium', 'low'
    solution_approach JSONB,
    status VARCHAR(20) DEFAULT 'identified',
    created_at TIMESTAMP DEFAULT NOW()
);
```

### 3.2 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

```sql
-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_projects_status ON projects(status);
CREATE INDEX idx_erp_functions_type_module ON erp_functions(erp_type, module);
CREATE INDEX idx_hearing_responses_project ON hearing_responses(project_id);
CREATE INDEX idx_setup_definitions_project ON setup_definitions(project_id);

-- å…¨æ–‡æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_erp_functions_search ON erp_functions 
USING gin(to_tsvector('japanese', function_name || ' ' || description));
```

## 4. APIè¨­è¨ˆ

### 4.1 RESTful APIè¨­è¨ˆåŸå‰‡

#### URLæ§‹é€ 
```
/api/v1/projects                    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ãƒ»ä½œæˆ
/api/v1/projects/{id}               # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤
/api/v1/projects/{id}/hearings      # ãƒ’ã‚¢ãƒªãƒ³ã‚°ç®¡ç†
/api/v1/projects/{id}/setup         # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®šç¾©
/api/v1/projects/{id}/gaps          # GAPè¦ä»¶

/api/v1/knowledge/erp-functions     # ERPæ©Ÿèƒ½ãƒã‚¹ã‚¿
/api/v1/knowledge/hearing-items     # ãƒ’ã‚¢ãƒªãƒ³ã‚°é …ç›®
/api/v1/generators/hearing-list     # ãƒ’ã‚¢ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆ
/api/v1/generators/setup-definition # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®šç¾©ç”Ÿæˆ
```

#### æ¨™æº–ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "success": true,
  "data": {
    // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿
  },
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "pages": 5
  },
  "meta": {
    "timestamp": "2025-07-13T10:00:00Z",
    "version": "1.0"
  }
}
```

### 4.2 ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### ãƒ’ã‚¢ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆç”ŸæˆAPI
```python
@router.post("/generators/hearing-list")
async def generate_hearing_list(
    request: HearingListRequest,
    db: Session = Depends(get_db)
) -> HearingListResponse:
    """
    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã«åŸºã¥ããƒ’ã‚¢ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆè‡ªå‹•ç”Ÿæˆ
    """
    service = HearingGeneratorService(db)
    return await service.generate_hearing_list(
        erp_type=request.erp_type,
        business_modules=request.business_modules,
        business_requirements=request.business_requirements
    )
```

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®šç¾©ç”ŸæˆAPI
```python
@router.post("/generators/setup-definition")
async def generate_setup_definition(
    project_id: UUID,
    request: SetupDefinitionRequest,
    db: Session = Depends(get_db)
) -> SetupDefinitionResponse:
    """
    ãƒ’ã‚¢ãƒªãƒ³ã‚°çµæœã«åŸºã¥ãã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®šç¾©è‡ªå‹•ç”Ÿæˆ
    """
    service = SetupGeneratorService(db)
    return await service.generate_setup_definition(
        project_id=project_id,
        hearing_responses=request.hearing_responses
    )
```

## 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 5.1 èªè¨¼ãƒ»èªå¯

#### JWTèªè¨¼
```python
# JWTè¨­å®š
JWT_ALGORITHM = "HS256"
JWT_EXPIRE_MINUTES = 60
JWT_REFRESH_EXPIRE_DAYS = 30

# æ¨©é™ç®¡ç†
class Permission(str, Enum):
    PROJECT_READ = "project:read"
    PROJECT_WRITE = "project:write"
    PROJECT_ADMIN = "project:admin"
    KNOWLEDGE_READ = "knowledge:read"
    KNOWLEDGE_WRITE = "knowledge:write"
```

#### ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰
```python
ROLE_PERMISSIONS = {
    "viewer": [
        Permission.PROJECT_READ,
        Permission.KNOWLEDGE_READ
    ],
    "consultant": [
        Permission.PROJECT_READ,
        Permission.PROJECT_WRITE,
        Permission.KNOWLEDGE_READ
    ],
    "admin": [
        Permission.PROJECT_ADMIN,
        Permission.KNOWLEDGE_WRITE
    ]
}
```

### 5.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–
- **ä¿å­˜æ™‚æš—å·åŒ–**: AES-256ã«ã‚ˆã‚‹æ©Ÿå¯†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æš—å·åŒ–
- **è»¢é€æ™‚æš—å·åŒ–**: TLS 1.3å¿…é ˆã€HSTSæœ‰åŠ¹åŒ–
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æš—å·åŒ–**: AWS S3/Azure Blobæš—å·åŒ–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

#### å€‹äººæƒ…å ±ä¿è­·
```python
# å€‹äººæƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°
@dataclass
class PersonalInfo:
    email: str = field(metadata={"pii": True})
    name: str = field(metadata={"pii": True})
    
    def to_masked_dict(self) -> dict:
        return {
            "email": mask_email(self.email),
            "name": mask_name(self.name)
        }
```

## 6. æ‹¡å¼µæ€§ãƒ»é‹ç”¨è¨­è¨ˆ

### 6.1 æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

#### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åˆ†é›¢ç‚¹
```yaml
# Phase 2ä»¥é™ã®åˆ†é›¢è¨ˆç”»
services:
  requirements-service:
    description: "è¦ä»¶å®šç¾©ãƒ»ãƒ’ã‚¢ãƒªãƒ³ã‚°é–¢é€£æ©Ÿèƒ½"
    database: "requirements_db"
    
  knowledge-service:
    description: "çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ãƒ»ERPæ©Ÿèƒ½ãƒã‚¹ã‚¿"
    database: "knowledge_db"
    
  migration-service:
    description: "ç§»è¡Œæ”¯æ´æ©Ÿèƒ½ï¼ˆPhase 2ä»¥é™ï¼‰"
    database: "migration_db"
    
  generator-service:
    description: "è‡ªå‹•ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³"
    database: "shared"
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
```python
# Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­è¨ˆ
CACHE_KEYS = {
    "erp_functions": "erp_funcs:{erp_type}:{module}",  # TTL: 1æ™‚é–“
    "hearing_items": "hearing_items:{function_id}",   # TTL: 30åˆ†
    "user_sessions": "session:{user_id}",             # TTL: 60åˆ†
}
```

### 6.2 ç›£è¦–ãƒ»ãƒ­ã‚°

#### ãƒ­ã‚°æˆ¦ç•¥
```python
# æ§‹é€ åŒ–ãƒ­ã‚°
import structlog

logger = structlog.get_logger()

# æ¥­å‹™ãƒ­ã‚°
logger.info(
    "hearing_list_generated",
    project_id=project_id,
    erp_type=erp_type,
    module=module,
    item_count=len(hearing_items),
    generation_time_ms=elapsed_time
)
```

#### ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›£è¦–
```yaml
# Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹
custom_metrics:
  - hearing_list_generation_duration_seconds
  - setup_definition_generation_duration_seconds  
  - knowledge_base_search_duration_seconds
  - active_projects_total
  - gap_requirements_by_type
```

## 7. Phase 2+ æ‹¡å¼µã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 7.1 ç§»è¡Œæ”¯æ´ãƒ„ãƒ¼ãƒ«çµ±åˆ

#### ãƒ‡ãƒ¼ã‚¿é€£æºã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
è¦ä»¶å®šç¾©DB â”€â”€â†’ Message Queue â”€â”€â†’ ç§»è¡Œæ”¯æ´DB
     â”‚                              â”‚
     â””â”€â”€â”€ Event Sourcing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                                    â”‚
ç§»è¡Œãƒãƒƒãƒ”ãƒ³ã‚° â†â”€â”€â”€ API Gateway â†â”€â”€â”€â”€â”€â”˜
è‡ªå‹•ç”Ÿæˆ
```

#### ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ
```python
# ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
class SetupDefinitionUpdated(BaseEvent):
    project_id: UUID
    function_id: UUID
    old_parameters: dict
    new_parameters: dict
    
# ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
async def handle_setup_definition_updated(
    event: SetupDefinitionUpdated
):
    # ç§»è¡Œãƒãƒƒãƒ”ãƒ³ã‚°ã®æ›´æ–°é€šçŸ¥
    await migration_service.notify_parameter_change(
        project_id=event.project_id,
        changes=compare_parameters(
            event.old_parameters,
            event.new_parameters
        )
    )
```

### 7.2 AI/MLæ©Ÿèƒ½çµ±åˆ

#### çŸ¥è­˜ãƒ™ãƒ¼ã‚¹æ‹¡å¼µ
```python
# ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ï¼ˆPhase 3+ï¼‰
from langchain.vectorstores import Chroma
from langchain.embeddings import OpenAIEmbeddings

class KnowledgeVectorStore:
    def __init__(self):
        self.embeddings = OpenAIEmbeddings()
        self.vectorstore = Chroma(
            embedding_function=self.embeddings
        )
    
    async def semantic_search(
        self, 
        query: str, 
        erp_type: str
    ) -> List[ERPFunction]:
        """ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã«ã‚ˆã‚‹æ©Ÿèƒ½æ¨è–¦"""
        results = await self.vectorstore.similarity_search(
            query, 
            filter={"erp_type": erp_type}
        )
        return [self._to_erp_function(r) for r in results]
```

## 8. é–¢é€£æ–‡æ›¸

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
- [ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“æ§‹æƒ³](./project-overview.md)
- [ğŸ—“ï¸ é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](./development-roadmap.md)
- [ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è¨ˆç”»](./project-management-plan.md)
- [ğŸ“ ä½œæ¥­è¨˜éŒ²](./work-log.md)

### å®Ÿè£…é–¢é€£
- [Phase 1: MVPé–‹ç™º](../phase1/)
- [Phase 2: GAPåˆ†ææ‹¡å¼µ](../phase2/)
- [Phase 3: æ¥­å‹™é ˜åŸŸæ‹¡å¼µ](../phase3/)
- [Phase 4: ç§»è¡Œãƒ„ãƒ¼ãƒ«çµ±åˆ](../phase4/)
- [Phase 5: ãƒãƒ«ãƒERPå¯¾å¿œ](../phase5/)

### å‚è€ƒè³‡æ–™
- [ğŸ—ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ with Claude](./ERPå°å…¥æ”¯æ´ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆwithClaude.md)
- [ğŸ—ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ with GPT](./ERPå°å…¥æ”¯æ´ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆwithGPT.md)

---
**æœ€çµ‚æ›´æ–°**: 2025-07-13  
**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**æŠ€è¡“ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å®Ÿæ–½å¾…ã¡